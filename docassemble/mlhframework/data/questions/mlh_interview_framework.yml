---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ALAnyState:any_state.yml
---
code: |
  # This controls the default state in address field questions
  AL_DEFAULT_STATE = "MI"
---
modules:
  - .al_courts_mi_edit
  - google_drive_downloader
---
objects:
  - court_list: ALCourtLoader.using(file_name='michigan_court_contact_information_current.xlsx')
---
code: |
  # al_form_type = "appeal" 
  # leave this in & choose type to test in this interview, comment out to pull into other interviews
---
id: Choose a court
mandatory: False
question: |
  % if al_form_type == 'starts_case':
  What county do you want to file in?
  % elif al_form_type == 'appeal':
  What is the county of the trial court your case was originally filed in?
  % else:
  Please choose the county of the court where your case is.
  % endif
subquestion: |
  % if al_form_type != 'starts_case':
  ${ collapse_template(help_user_choose_court_template) }
  % endif
fields:
  - County: county_choice
    code: court_list._load_courts()["address_county"].unique()
---
template: help_user_choose_court_template
subject: |
  How do I know?
content: |
  You can find the case number, county and court by looking at the top of court papers from your case such as the summons, complaint, petition, or answer in your case. 
---
mandatory: False
question: |
  % if al_form_type == 'starts_case':
  What court do you want to file in?
  % elif al_form_type == 'appeal':
  What trial court was your case originally filed in?
  % else:
  Please choose the court where your case is.
  % endif
subquestion: |
  % if al_form_type != 'starts_case':
  ${ collapse_template(help_user_choose_court_template) }
  % endif
fields:
  - Court: court_index
    # below filters only by county. All possible courts will come up.
    # code: court_list.filter_courts([county_choice], column='address_county') 
    # below filters by county & type. Only shows district & circ courts.
    code: court_list.filter_courts_by_2([county_choice], ['district', 'circuit'], column_1='address_county', column_2='type')
---
code: |
  the_court = court_list.as_court('the_court',court_index)
---
 # Change this to True to test in this interview.
mandatory: False
question: |
  Display court info
subquestion: |
  ${ the_court }
  
  ${ the_court.address.block(bare=True) }
  % if defined('the_court.description'):
  ${ the_court.description }
  % else:
  % endif  
# adding (bare=True) strips out unit formatting that messed with PO Boxes
# ${ map_of(the_court) }
# getting errors when latitude and longitude are empty, so commenting this out for now